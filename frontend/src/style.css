@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --western-sand: #E8D4A8;
  --western-brown: #8B4513;
  --western-dark: #2C1810;
  --western-gold: #DAA520;
  --western-leather: #964B00;
  --western-red: #8B0000;
}

body {
  font-family: 'Cinzel', serif;
  background: linear-gradient(135deg, #2C1810 0%, #4A2C1A 50%, #2C1810 100%);
  min-height: 100vh;
  color: #E8D4A8;
}

.font-western {
  font-family: 'Rye', serif;
}

@layer components {
  .btn-western {
    @apply px-6 py-3 bg-gradient-to-b from-western-gold to-western-leather 
           text-western-dark font-bold rounded-lg shadow-lg
           hover:from-yellow-400 hover:to-western-gold
           active:scale-95 transition-all duration-200
           border-2 border-western-dark;
  }

  .btn-danger {
    @apply px-6 py-3 bg-gradient-to-b from-red-600 to-red-800
           text-white font-bold rounded-lg shadow-lg
           hover:from-red-500 hover:to-red-700
           active:scale-95 transition-all duration-200
           border-2 border-red-900;
  }

  .card-game {
    @apply relative w-24 h-36 rounded-lg shadow-xl cursor-pointer
           transition-all duration-300 transform-gpu;
    background: linear-gradient(145deg, #E8D4A8, #D4C4A0);
    border: 3px solid #8B4513;
  }

  .card-game:hover {
    @apply -translate-y-5 scale-110 z-50;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
  }

  .card-back {
    background: linear-gradient(145deg, #8B4513, #654321);
    background-image: 
      radial-gradient(circle at 30% 30%, rgba(218, 165, 32, 0.3) 0%, transparent 50%),
      radial-gradient(circle at 70% 70%, rgba(218, 165, 32, 0.2) 0%, transparent 50%);
  }

  .health-bar {
    @apply flex gap-1;
  }

  .health-bullet {
    @apply w-4 h-4 rounded-full transition-all duration-300;
  }

  .health-bullet.full {
    @apply bg-gradient-to-b from-yellow-400 to-yellow-600;
    box-shadow: 0 0 8px rgba(234, 179, 8, 0.6);
  }

  .health-bullet.empty {
    @apply bg-gray-700 border border-gray-600;
  }

  .input-western {
    @apply w-full px-4 py-3 rounded-lg bg-western-dark/50
           border-2 border-western-gold/30 text-western-sand
           focus:border-western-gold focus:outline-none
           placeholder-western-sand/50;
  }

  /* New Player Board Styles */
  .player-board {
    @apply absolute flex items-stretch gap-2 p-2 rounded-lg
           transition-all duration-300 transform-gpu
           border-2
           shadow-lg;
    background-color: #3e2723;
    border-color: #8d6e63;
    background-image:
      repeating-linear-gradient(90deg, transparent 0, transparent 1px, rgba(0,0,0,0.1) 1px, rgba(0,0,0,0.1) 4px),
      linear-gradient(to bottom, #5d4037, #3e2723);
    box-shadow:
      inset 0 0 20px rgba(0,0,0,0.8),
      0 10px 20px rgba(0,0,0,0.5);
  }

  .player-board.current-turn {
    /* Border handled by pseudo-element */
    border-color: transparent;
    transform: scale(1.02);
    z-index: 10;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
  }

  .player-board.current-turn::before {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 10px;
    background: linear-gradient(60deg, #8B4513, #DAA520, #FFD700, #DAA520, #8B4513);
    background-size: 300% 300%;
    animation: goldFlow 2s ease infinite;
    z-index: -1;
    box-shadow: 0 0 25px rgba(218, 165, 32, 0.8);
  }

  @keyframes goldFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .player-board.pending-action {
    border-color: transparent;
    z-index: 20; /* Higher priority than turn */
    box-shadow: 0 0 20px rgba(220, 20, 60, 0.5);
  }

  .player-board.pending-action::before {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 10px;
    background: linear-gradient(60deg, #8B0000, #FF0000, #FF4444, #FF0000, #8B0000);
    background-size: 300% 300%;
    animation: goldFlow 1s ease infinite; /* Faster flow for urgency */
    z-index: -1;
    box-shadow: 0 0 25px rgba(255, 0, 0, 0.8);
  }

  .player-board.targetable {
    @apply cursor-pointer ring-2 ring-red-500;
  }
  .player-board.targetable:hover {
    @apply ring-4 ring-red-400 scale-105 z-20;
  }
  
  .player-board.dead {
    @apply opacity-60 grayscale;
  }

  .board-section-left {
    @apply w-16 flex-shrink-0 relative flex flex-col items-center justify-center;
  }

  .character-portrait {
    @apply w-14 h-14 rounded-md border-2 border-western-gold bg-black/40
           flex items-center justify-center text-western-sand overflow-hidden relative;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
  }

  .role-badge {
    @apply absolute -top-2 -left-2 w-7 h-7 rounded-full border-2 border-western-dark
           flex items-center justify-center font-bold text-xs shadow-md z-10;
  }
  .role-badge.sheriff { @apply bg-yellow-500 text-white; }
  .role-badge.deputy { @apply bg-blue-500 text-white; }
  .role-badge.outlaw { @apply bg-red-600 text-white; }
  .role-badge.renegade { @apply bg-purple-600 text-white; }
  .role-badge.hidden-role { @apply bg-gray-600 text-gray-300; }

  .board-section-middle {
    @apply flex-1 flex flex-col justify-between py-0.5 min-w-0;
  }

  .player-name {
    @apply font-western text-base text-western-sand truncate leading-tight;
    text-shadow: 1px 1px 2px black;
  }

  .health-container {
    @apply flex flex-wrap gap-0.5 my-1;
  }

  .bullet-slot {
    @apply w-2.5 h-4 rounded-sm border border-gray-800 transition-colors;
    background: #222;
    box-shadow: inset 1px 1px 2px rgba(0,0,0,0.5);
  }
  .bullet-slot.full {
    background: linear-gradient(to right, #DAA520, #B8860B);
    border-color: #8B4513;
  }

  .hand-indicator {
    @apply flex items-center gap-1 text-xs text-western-sand/70;
  }

  .board-section-right {
    @apply w-24 flex-shrink-0 flex flex-col gap-1;
  }

  .equipment-slot {
    @apply flex-1 rounded bg-black/30 border border-western-gold/20
           flex items-center justify-center text-xs overflow-hidden relative;
  }

  .card-mini {
    @apply w-full h-full flex items-center justify-center text-[10px] text-center p-0.5 leading-none font-bold;
  }
  .card-mini.blue-card {
    @apply bg-blue-900/40 text-blue-200 border-l-2 border-blue-500/50;
  }
  .card-mini.weapon-card {
    @apply bg-red-900/40 text-red-200 border-l-2 border-red-500/50;
  }
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(218, 165, 32, 0.4);
  }
  50% {
    box-shadow: 0 0 40px rgba(218, 165, 32, 0.8);
  }
}

.game-table {
  background: radial-gradient(ellipse at center, #2d5016 0%, #1a3009 50%, #0d1a04 100%);
  border: 8px solid #4a2c1a;
  box-shadow: 
    inset 0 0 100px rgba(0, 0, 0, 0.5),
    0 0 50px rgba(0, 0, 0, 0.8);
}

.deck-pile {
  @apply relative;
}

.deck-pile::before {
  content: '';
  @apply absolute inset-0 rounded-lg;
  background: linear-gradient(145deg, rgba(139, 69, 19, 0.8), rgba(101, 67, 33, 0.8));
  transform: translateY(3px) translateX(3px);
  z-index: -1;
}

.deck-pile::after {
  content: '';
  @apply absolute inset-0 rounded-lg;
  background: linear-gradient(145deg, rgba(139, 69, 19, 0.6), rgba(101, 67, 33, 0.6));
  transform: translateY(6px) translateX(6px);
  z-index: -2;
}
